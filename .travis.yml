language: php
php:
- '7.0'
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: EEU64yuNexkoA4j05BQuPn1AxlGrD9cDInDCYWRut6e70G0f9ZbU0qWMQchs+gkYBng4i+3bye8A3XpShy7bbXoQHYEevrX6GYMFggsU+jmqVuikxQHmmp/2CD2l9sNs3mGLSeC3HBJTbiOXRFTpQmI0NPh3lJKY+mu9ufCDU3MQX+HJ++z1/84rB53B6RFFNEOb3wqBrk34hZLzPDEUEVVUe8guyeszkOTbMYPCi2GSDwasXgnaGuBPeM+c2jq3K9lI9xOZJexWadLPgtFnXcp4+TAPkiksMoGqDQQSnG8K1Snrrlc1AiWAnrM8SIySVky9u4cXGIaPzEIeYhxcaiphPlbaukMMPcdeeDx8beLUSSuEKjOdPpesjEpchccPDYCQTt0gaqzthCAFFLNlc0RkfbCnrb26/WWSEkW/B04QruwWm2kOcCWHT2dqjVtLrVGEqkBBpFzr4IAn1j2LedMsutR0non8ZVsRf/gyA6i3zYJ/FijvIlFuVTpb8y+gsCzi/7JbV+jyOwZr/zHJrG+MmD9AgmaxpWisTo8zQYwwjqnfpbTeuIXJeQQeJ09KHWHoXSXNXklLvEhyMMhhiqpAMO+pMJdO4PlNcVudABVQ/ai+xuUjOtk4eJeB1FRwVNT4KzQkdPpa+7/QPx1OiSTYfJ7vB0tMOb/mR7wfwTE=
  - secure: KzkogMihNlfg78K/7e14Hh3yt1DYoL6J6H7hgsewXnTh1Pa2bqnmz3dAVJAVHSAxxfg8GxwL2qFj4uq8vIkEpjJI6fIeyVNE2YKwiFeA9Q3+BFqjCcVsGy6zJwlM4Lv3pg5eR21MaQDU/u90J81zPcUydGqBURZr8wmSd8GXniQchb8YwDEV16780wRSRSqnlTGC8z1t1w3Y38gTDsQ2HwhBq/Ny/SBbu/iffa1617YsLsPUBwoVlPI4Jv5nqvcPdwQt/9Vi779pGWSa2iqGBihqm7pMyj31HdY7zTtmb+LVWHG5G1+frcsDG/VxSP2X1QEnVYjz/Rr8/TWgWFd9jOX1Clb7FsDiz+ok3DRBpsYE59IoT+kwZG7jmHK/LhWJTvQT93FcNg84YEAnKfge2TatF9rzItoynWollTreNpyEensyW+Nf7cStz2Q5rg7tMtbwuOie43cUoe/dDeq2R/FB9AYK63Ct+viXUiCsaeSJ+eCXOnELojVGxxnhPJSGrwfCZsZboNNeI/kaV7TKV++RPa7J1h3kh/o7n1mfhaHyZrPik3mIZO7Y4Dl2t6Yl8muTWswkmRWwcOd463OCYRplKvo5ohNIUbWGUqL5qTMoOBTe/FKkl0KpRSABw2/+1/iECqZQblnCribnSlac3Lx0Znf2WlgjFVajRwBN0Jw=
  - secure: pxgejAf1/Xtf2jpLsCM3W38mpcA4QewWKFsBtaCfHinONpZzZk22ywtcBj9mdj4vb0CoAowahHSwX9o/SOntMThtX9nDTUVcAq1+b8i8aO/CQ/W3JV4BRein6dw3lo7xa+r6xaAU9jqhsZLXv9Tqqmneb+D5Xry0AsbVqt778LIdRcL0Xb+y00NWhdtGzMQBl1wxGb7XvcrVGwC/DEO/tZhx9Hi26SkuRkFWGm5tXyvbsPa/td3Me4jycyI/h/kBmLsEBgPawfCtAKBxLiuPpxYmXfE9tFT/4usxfRiG+pba6aX+41EVwEl1z8r3ugGgpbaR2yufaES231i63PKcQjxrhLZ59AMjjK0gGVnxZXOzQVxYfSz2vnoqmXMlLhXx5MhjPZhmd+kXYxEWsmzdpbaIY94lulD690ZKQvyfTt+21lYd+Wjt/tjUmlh+TD0n4YDpJQ6eeFy4UsERTja6s/x0OCTPYVmS6aqzFbMySq0+l55JSjm42X8H1Bn5sUVlgE+MbbKPuFLwi0XKsfc2GGQ5XwfOqj8s7GJrlSqVWvNfzgYKZhFOWu78g/18oVm4FM7b64KCmytFPV35LPfjH7Is/v381XmvFTBDE9D9cSPb1pIVvDJyAwAxxECrtHxoRcjGDV7QRwY4dy3rry28y+P9R/bdJDQjSO8L+0DRCnc=
script:
- ls -alh
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=netsyos/transmission
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
after_success:
- date
notifications:
  slack:
    secure: ixr3HLT383e4iLlXYFAWUJL8LE97h71L1uSs+fjHzXdov8VyNZNdZ6WL3MOk4pmqkX1u0xBTO2fIjPLwsKyn+T/wm9PaN4fjz0hrLw/j6tAbYJc7G/rIU3l7Gk4GLUOIMgMFzdz18mYhuvP4bK8n/C4M1b9Q4CKYeYq+bwMB81R0qnqVnv+TJxyHf6+xE1GVQY4WY6DOVgnWyyrcoOX4koEsbfiYnOGjy3UtqAsN6IerkpszGPHvfzjcqNGSIXfPU8uRFMipumADfXnbp+vz4HbIi6bD/buA8fSQGEM6t5BbRqzny1ej6OJR5/d5wv+QEXit/T382DAdVC6zlVuvrSYEbPuP6Ggwg4EGaD6ofK4PoLdjlpNpAduYwtEIsn9CPlgrJgXqmGaLtzmtmg6C8BRCaaheO8ipX3qMEbrPFL0J1wdxDbh8N1+7NZUR41q2dWJwgqhb72JKuuedQ77UPgv5eq/X40u3shKRbv72gDijqku2SdkP9p/BQNHBzc9rPcSVpXmr8++gD6ucz4e0e373px7GbJfpLZayRKsATXahNFAVxVvurMTu+BJt0BO+Y+UNhegL/KEN3563gVoIJVnt59K8Wr+nti9FzUsXgClCPYcBYANVzV29/Q3dGJsQ/KjDJ4xlD6WCsUhwvXM1GPuidAI9HhyE4T18UzPGBdQ=
